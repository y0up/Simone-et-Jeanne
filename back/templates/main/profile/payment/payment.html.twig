{% extends 'base.html.twig' %}

{% block title %}User Payment{% endblock %}

{% block main %}
{% include "main/profile/_menu.html.twig" %}
    <h1>Payment</h1>
    
    <a href="{{ path('payment_add', {'slug': user.slug}) }}">Add</a>
    <hr>
    {% if app.request.get('_route') == 'payment_add' %}
    {{ include('main/profile/payment/_form.html.twig', {'button_label': 'Add', 'slug': user.slug}) }}
    {% endif %}
    {% for payment in payments %}
        {% if app.request.get('id') == payment.id %}
        {{ include('main/profile/payment/_form.html.twig', {'button_label': 'Update', 'slug': user.slug}) }}
            <hr>
            <hr>
        {% endif %}

        {% if app.request.get('id') != payment.id %}
            {{ payment.name }}
            <br>
            {{ payment.accountNumber }}
            <br>
            {{ payment.expiry|date('Y-m') }}
            <br>
            {{ payment.type }}
            <br>
            <a href="{{ path('payment_edit', {'slug': user.slug, 'id': payment.id}) }}">edit</a>
            {{ include('main/profile/payment/_delete_form.html.twig') }}
            <hr>
            <hr>
        {% endif %}
    {% endfor %}
{% endblock %}
